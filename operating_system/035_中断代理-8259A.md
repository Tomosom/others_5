# 中断代理-8259A
- 问题
    不同夕卜设如何向处理器发送中断信号？
    当多个外设同时产生中断时，如何进行处理?

- 想象中的连接方式。。。
    ![](_v_images_/.png)
    处理器有多少INTR弓圓?
    離入多少外设？处理器
    有必要^外设直接相连吗？

- 处理器的中断代理（8259A)
    ![](_v_images_/.png)
    于管理和裁决外部设备的中断请求。

-  8259A是专为处理器设计的中断管理芯片
    - 可通过编程对8259A进行功能配置
    - 屏蔽外设中断，对中睡行优先级判决
    - 向处理器提供中断向量
    对8259A的编程控制是操作系统内核的重要工作

- 8259A芯片的内部结构
    ![](_v_images_/.png)

-  8259A关键组成简介
    - INT:选出优先级最高的中断请求后，发信号通知CPU
    - INTA:中断响应信号，接收来自CPU的INTA接口的中断响应信号
    - PR:优先级仲裁器，当多个中断同时发生时，找出优先级最高的中断
    - IMR:中断屏蔽寄存器，用来屏蔽某个外设的中断
    - ISR:中断服务寄存器，当某个中断正在被处理时，保此寄存器中
    - IRR:中断请求寄存器，用来接受经过IMR寄存器过滤后的中断信号并锁存，
    此寄存器中全是等待处理的中断

# 编程实验 8259A与中断处理

-  8259A工作方式
    - 中断触发方式
        - 边沿触发（推荐）
            - 中断引脚电平变化的一瞬间认为中断申请到来（上升沿触发）
        - 电平触发
            - 中断引脚上的信号保持稳定电平一定时间后认为中断申请到来

-  8259A工作方式
    - 数据连接方式
        - 非缓冲方式
            - 将8259A直接与数据总线相连
        - 缓冲方式
            - 将8259A通过总缴区动器和数据总线相连

-  8259A工作方式
    - 中断优先方式
        - 固定优先级方式
            - 优先级由高到低的顺序是：IR〇, IR1, IR2,…，IR7
        - 自动循环方式
            - 某一中断请求被响应后，该中断源优先级自动成为最低
        - _盾环方式
            - 通过编程指定某中断源优先级成为最低
            - 其它中断源优先级自动改变

-  8259A工作方式
    - 中断嵌套方式
        - 完全嵌套方式（默认方式）
            - 执行中断服务程序期间，不响应本级中断和较低级中断
        - 特殊完全嵌套方式
            - 执行中断服务程序期间，可响应本级中断，不响应较低级中断

-  8259A工作方式
    - 中断屏蔽方式
        - 普通屏蔽方式
            - 将IMR中的某一位或几位置为1,屏蔽掉相应级別的中断请求
        - 特殊屏蔽方式
            - 未被屏蔽的中断源均可在某个中断服务程序中被响应，即低优先
            - 级中断可以打断正在服务的高优先级中断

-  8259A工作方式
    - 中断结束方式
        - 自动结束方式（只适用于非多重中断的情况）
            - 8259A自动清除ISR中已置位的优先级最高的位
        - 手动结束方式
            - 在中断服务程序的最后，向8259A发中断结束命令，将ISR中相应的位清除，表明中断服务程序已完成

# 编程实验 8259A功能介绍

-  To be continued …
    思考：
    如何具体的设置和控制8259A ?

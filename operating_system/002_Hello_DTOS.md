Hello, DT〇S!

■问题

        主引导程序是软件还是固件？如果是软件,
                 那么甶谁开发？如何开发？

狄泰—+未来  © 2018成都狄泰未来科技有限公司                         唐佐林视^频教程

Hello, DTOS!

■主引导程序
    - _段存储在主引导区（MBR )中的有效代码
    -并不固化于硬彳牛，属于操作系统代码的一部分
    -启动操作系统内核的桥梁，由汇编程序写成
    一代码总量不能超过512个字节（包含0x55aa )

狄泰—+未来  © 2018成都狄泰未来科技有限公司                         唐佐林视^频教程

Hello, DT0S!

■主引导程序的开发

                 入 口 ： 0x7c00             V\ / 〇           入 口 ： main
                                                〇
                      主引导程序                                       应用程序
                     (汇編语言）
        ----------- 1 1-----------------                        (C/C++ )

                    BIOS中断                         ----------- 1 1-----------------

                                                               OS系统调用

狄泰—+未来  © 2018成都狄泰未来科技有限公司                         唐佐林视^频教程

Hello, DT0S!

■课程实验
    一编写_个主引导程序。[编语曰）
    -可独立运行于x86架构的主机（无操作系统）
    一运行后在屏幕上打印"Hello, DTOS!"

狄泰一+未来  ◎ 2018成都狄泰未来科技有限公司

Hello, DT0S!

■实现思路
    1•将关键寄存器的值设置为〇 ( mov ax, 0 )
    2•定义需要打印的数据（db"Hello,D.T.OS!__ )
    3.打印预定义好的字符数据（int 0x10 )

狄泰—+未来  © 2018成都狄泰未来科技有限公司                         唐佐林视^频教程

Hello, DT0S!

■汇编小贴士 一
    - mov:赋值操作，将右操作数赋彳彰合左操作数
          ♦ mov ax, 0 ;将0赋值绐ax寄存器
    - int :触发中断
          ♦ int 0x10 ;触发0x10中断，对屏幕进行操作
    一 hit:停止运行，CPU进入暂停状态，不执行任何操作
          ♦ hit ;使程序进入睡眠状态

狄泰—+未来  © 2018成都狄泰未来科技有限公司                         唐佐林视^频教程

Hello, DT0S!

■汇编小贴士二
    -汇编中地址的访问方式：段地址：段内偏移地址
          ♦ mov byte [0xb800:0x01], 0x07 ; 0xb800:0x01 今 0xb8000 + 0x01
    -标签
          ♦ 用于标i只后续指令的地址（可等同为C语言中的标签）
    — % VS % %
          ♦ $表示当前指令行地址，$$表示当前汇编段起始地址

---------------------------------我是可爱的页面分割线-------------------------------------
狄泰一+未来  ◎ 2018成都狄泰未来科技有限公司                                       唐佐林娜教程

Hello, DTOS!

■ 中 断 调 用 vs函数调用
                              在屏幕上打印一^字符

狄泰—+未来  ◎ 2018成都狄泰未来科技有限公司                                       唐佐林视^频教程

The shortest answer is doing.

               编程实验

              第一个引导加载程序
                    boot.asm

狄泰—+未来  © 2018成都狄泰未来科技有限公司                                       唐佐林视^频教程

Hello, DT0S!

■问题

        女口何验证编写的主引导程序？

              歉

              •k

狄泰—+未来  © 2018成都狄泰未来科技有限公司                                       唐佐林视^频教程

Hello, DT0S!

■解决方案设计
     一将汇编源码编译为二进制机器码（nasm )
    -创建虚拟盘（bximage )
      一将二进制代码写入虚拟盘起始位置（dd )
    -在虚拟机中将虚拟盘作为启动盘执行（vmware )

狄泰—+未来  © 2018成都狄泰未来科技有限公司                                       唐佐林视^频教程

Hello, DT0S!

■实验原材料
     -nasm

            ♦ nasm bootasm -o bootbin

    -bximage

            ♦ bximage ajmg -q -fd -size=l*44

    -dd

            ♦ dd if=bootbin of=ajmg bs=512 count=l conv=notrunc

狄泰—+未来  ◎ 2018成都狄泰未来科技有限公司                                       唐佐林视^频教程

The shortest answer is doing.

              编程实验

              运行弓i导加载程序
                    boot.img

狄泰—+未来  © 2018成都狄泰未来科技有限公司                                       唐佐林视^频教程

 小结

■主引导程序的代码量不能超过512字节
■主引导程序需要使用汇编语言开发
■主引导程序中可以通过BIOS中断使用硬件功能
■主引导程序运行于实模式（地址都是实际的物理地址)

---------------------------------我是可爱的页面分割线-------------------------------------
狄泰夺+未来  ©2018成都狄泰未来科技有限公司

  狄泰未来

在这里收获的是未来，而不只是技术!
             交流群：199546072

                  ◎ 2018成都狄泰未来科技有限公司

---------------------------------我是可爱的页面分割线-------------------------------------

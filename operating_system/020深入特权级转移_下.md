# 深入特权级转移
- 深入理解调用门
    - 调用门用于向高特权级的代码段转移（CPL >= DPL~object~)
    - 调用门描述符的特权级低于当前特权级（CPL <= DPL~gate~)
    门的作用类似于蹦床
    ![](_v_images_/.png)

- 关于调用门的注意事项一
    - 调用门支持特权级同级转移
    - 调用门同级转移被处理为普通函数调用或
    - call通过调用门能提升特权级，jmp通过调用门只能同级转移

- 关于调用门的注意事项二
    - 通过调用门降特权级返回 (retf) 时
        - 对目标代码段以及栈段进行特权级检查
        - 对相关段寄存器强制清零（指向高特权级数据的段寄存器）

# 编程实验 深入理解调用门

- 思考
    特权级甶高至低返回后，为什么要把指向高特权级数据的段寄存器清零？

# 小结
- 调用门的使用（数值上）：DPL~object~ <= CPL <= DPL
- 调用门支持同级转移（jmp指令只能同级转移）
- retf 对栈的检查：CS.RPL==SS.RPL==SS.DPL
- 特权级降低转移时，相关段寄存器的值将被清零
